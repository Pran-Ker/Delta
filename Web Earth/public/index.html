<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Map" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8"/>
    <title>Delta</title>
    
   
    <link rel="shortcut icon" href="/favicon.ico"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/iphone-icon.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/ipad-icon.png"/>
    <link rel="stylesheet" type="text/css" href="/styles/styles.css"/>

    <link rel="alternate" hreflang="x-default" href="http://earth.nullschool.net/"/>
    <link rel="alternate" hreflang="ja" href="http://earth.nullschool.net/jp/"/>
</head>
<body data-lang="en">

    <div id="display">
        <svg id="map" class="fill-screen" xmlns="http://www.w3.org/2000/svg" version="1.1"></svg>
        <canvas id="animation" class="fill-screen"></canvas>
        <canvas id="overlay" class="fill-screen"></canvas>
        <svg id="foreground" class="fill-screen" xmlns="http://www.w3.org/2000/svg" version="1.1"></svg>
    </div>

    <div id="sponsor" class="invisible">
    </div>

    <div id="details">
        <p id="status"></p>
        <div id="location">
            <p>
                <span id="location-coord"></span>
                <span id="location-close" class="invisible text-button"> ✕ </span>
            </p>
            <p>
                <span id="location-wind"></span>
                <span id="location-wind-units" class="text-button"></span>
            </p>
            <p>
                <span id="location-value"></span>
                <span id="location-value-units" class="text-button"></span>
            </p>
        </div>
        

        <p id="earth">
                <input type="text" id="input-location" placeholder="Enter a location:" style="text-align: left;" />
                <button id="submit-location">Submit</button>
            
            <br>
            <span id="show-menu" class="text-button" title="menu">Metrics</span>
            <span id="progress" class="invisible"></span>
        </p>

        <div id="menu" class="invisible">
            <p>Date | <span
                id="data-date" class="local"></span> <span
                id="toggle-zone" class="text-button"></span>
            </p>
            <p>Data | <span id="data-layer"></span></p>
            <p><span id="scale-label">Scale | </span><canvas id="scale"></canvas></p>
            <p>Source | <span id="data-center"></span></p>
            <p>Control | <span
                class="text-button" id="nav-now" title="Current Conditions">Now</span><span
                class="text-button" id="nav-backward-more"> « </span> – <span
                class="text-button" id="nav-backward"> ‹ </span> – <span
                class="text-button" id="nav-forward"> › </span> – <span
                class="text-button" id="nav-forward-more"> » </span><span
                class="text-button" id="show-location" title="Current Position">〖◯〗</span><span
                class="text-button" id="option-show-grid" title="Toggle Grid">Grid</span>
            </p>
            <p>Mode | <span
                class="text-button" id="wind-mode-enable">Air</span> – <span
                class="text-button" id="ocean-mode-enable">Ocean</span>
            </p>
            <p class="wind-mode">Height | <span
                class="surface text-button" id="surface-level" title="Surface">Sfc</span> – <span
                class="surface text-button" id="isobaric-1000hPa">1000</span> – <span
                class="surface text-button" id="isobaric-850hPa">850</span> – <span
                class="surface text-button" id="isobaric-700hPa">700</span> – <span
                class="surface text-button" id="isobaric-500hPa">500</span> – <span
                class="surface text-button" id="isobaric-250hPa">250</span> – <span
                class="surface text-button" id="isobaric-70hPa">70</span> – <span
                class="surface text-button" id="isobaric-10hPa">10</span> hPa
            </p>
            <p class="wind-mode">Overlay | <span
                class="text-button" id="overlay-off">None</span> – <span
                class="text-button" id="overlay-wind" title="Wind Speed">Wind</span> – <span
                class="text-button" id="overlay-temp" title="Temperature">Temp</span> – <span
                class="text-button" id="overlay-relative_humidity" title="Relative Humidity">RH</span> – <span
                class="text-button" id="overlay-air_density" title="Air Density">AD</span> – <span
                class="text-button" id="overlay-wind_power_density" title="Wind Power Density">WPD</span>
            </p>
            <p class="wind-mode"><span style="visibility:hidden">Overlay</span> | <span
                class="text-button" id="overlay-total_precipitable_water" title="Total Precipitable Water">TPW</span> – <span
                class="text-button" id="overlay-total_cloud_water" title="Total Cloud Water">TCW</span> – <span
                class="text-button" id="overlay-mean_sea_level_pressure" title="Mean Sea Level Pressure">MSLP</span>
            </p>
            <p class="ocean-mode invisible">Animate | <span
                class="text-button" id="animate-currents" title="Currents">Currents</span>
            </p>
            <p class="ocean-mode invisible">Overlay | <span
                class="text-button" id="overlay-ocean-off">None</span> – <span
                class="text-button" id="overlay-currents" title="Currents">Currents</span>
            </p>
            <p class="ocean-mode invisible"><span style="visibility:hidden">Overlay</span> |</p>
            <p>Projection | <span
                class="proj text-button" id="atlantis" title="Atlantis">A</span> – <span
                class="proj text-button" id="azimuthal_equidistant" title="Azimuthal Equidistant">AE</span> – <span
                class="proj text-button" id="conic_equidistant" title="Conic Equidistant">CE</span> – <span
                class="proj text-button" id="equirectangular" title="Equirectangular">E</span> – <span
                class="proj text-button" id="orthographic" title="Orthographic">O</span> – <span
                class="proj text-button" id="stereographic" title="Stereographic">S</span> – <span
                class="proj text-button" id="waterman" title="Waterman Butterfly">WB</span> – <span
                class="proj text-button" id="winkel3" title="Winkel Tripel">W3</span>
            </p>
        </div>
    </div>


        <div id="locationModal" style="display: none; position: fixed; z-index: 1000; align-items: right; justify-content: center; right: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
            <div style="background-color: #fefefe; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 60%;">
                <span id="closeModal" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;" >&times;</span>
                <h2 style="color: black;">Image of location: <span id="modal-location-display"></span></h2>
                <div id="modal-image-container">
                <img src="" alt="Image 1" id="modal-image1">
                <img src="" alt="Image 2" id="modal-image2">
                <img src="r00.png" alt="Image 2" id="modal-image2">
                </div>
                <h2 style="color: black;">No Threat detected</h2>
                <button id="openModalButton">Show Location Info</button>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const prompt = 'Tell me about this location';
                const endpoint = 'https://api.openai.com/v1/engines/davinci-codex/completions';
                
                fetch(endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'sk-proj-EhFXjrhbsBEgHD8YJ0OdT3BlbkFJyqG2e2FGDMysbsfAZFj0' // Ensure proper use of your API key
                    },
                    body: JSON.stringify({
                        'prompt': prompt,
                        'max_tokens': 5
                    })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data);
                    // You might want to do something here with the data, like updating the DOM
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                });
            });
        </script>

        <script>
            
                var submit = document.getElementById('input-location').value.trim();

                if (location) {
                    document.getElementById('submit-location').onclick = function(e) {
                        e.preventDefault(); 
                    
                        var locationInput = document.getElementById('input-location').value.trim();
                        if (locationInput) {
                            document.getElementById('modal-location-display').textContent = locationInput;
                            // Update image sources based on the location
                            document.getElementById('modal-image1').src = 'r1.png';
                            document.getElementById('modal-image2').src = 'r2.png';
                            // Show the modal
                            document.getElementById('locationModal').style.display = 'block';
                        } else {
                            alert('Please enter a location.');
                        }
                    };

                    document.getElementById('closeModal').addEventListener('click', function() {
                        document.getElementById('locationModal').style.display = 'none'; // Hide the modal
                    });
                    
                    
                    document.getElementById('submit-location').addEventListener('click', function() {
                        var location = document.getElementById('input-location').value;
                        document.getElementById('status').textContent = "Submitted location: " + location;
                    });
        }
        </script>
        
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js" charset="utf-8"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.0/backbone-min.js" charset="utf-8"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.1.0/topojson.min.js" charset="utf-8"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.3.10/d3.min.js" charset="utf-8"></script>

<!--
    <script src="/libs/underscore.js/1.6.0/underscore.js" charset="utf-8"></script>
    <script src="/libs/backbone.js/1.1.0/backbone.js" charset="utf-8"></script>
    <script src="/libs/topojson/1.1.0/topojson.js" charset="utf-8"></script>
    <script src="/libs/d3/3.3.10/d3.js" charset="utf-8"></script>
-->

    <script src="/libs/d3.geo/0.0.0/d3.geo.projection.v0.min.js" charset="utf-8"></script>
    <script src="/libs/d3.geo/0.0.0/d3.geo.polyhedron.v0.min.js" charset="utf-8"></script>
    <script src="/libs/when/2.6.0/when.js" charset="utf-8"></script>

    <script src="/libs/earth/1.0.0/micro.js" charset="utf-8"></script>
    <script src="/libs/earth/1.0.0/globes.js" charset="utf-8"></script>
    <script src="/libs/earth/1.0.0/products.js" charset="utf-8"></script>
    <script src="/libs/earth/1.0.0/earth.js" charset="utf-8"></script>

</body>
</html>
